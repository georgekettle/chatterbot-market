<%# Add message partial to the chat: %>
<%= turbo_stream.append dom_id(@chat, :messages), partial: 'messages/message', locals: { message: @message } %>
<%# Replace message form: %>
<% if @message.persisted? %>
  <%= turbo_stream.replace dom_id(@chat, :message_form), partial: 'messages/form', locals: { chat: @chat, message: Message.new } %>
<% else %>
  <%= turbo_stream.replace dom_id(@chat, :message_form), partial: 'messages/form', locals: { chat: @chat, message: @message } %>
<% end %>