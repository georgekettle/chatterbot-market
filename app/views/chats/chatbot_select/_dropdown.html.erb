<div class="relative">
  <button class="card p-4 flex items-center justify-between hover:bg-tertiary-50 w-full" id="chatbotSelectButton" data-dropdown-toggle="chatbotSelect" data-dropdown-placement="bottom-start" type="button">
    <div class="flex items-center space-x-4">
      <%= render 'chatbots/avatar', chatbot: selected_chatbot, size: :sm %>
      <div>
        <p class="text-left text-xs text-tertiary-500">Chatbot</p>
        <p class="font-medium text-sm text-left line-clamp-1"><%= selected_chatbot.name %></p>
      </div>
    </div>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-tertiary-500 shrink-0 ml-2">
      <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
    </svg>
  </button>

  <!-- Dropdown menu -->
  <div id="chatbotSelect" class="elevated-card hidden w-full relative h-96">
    <% chatbots_count = chatbots.count %>
    <% if chatbots_count.zero? %>
      <%# Empty state %>
      <%= render 'chats/chatbot_select/empty_state' %>
    <% else %>
      <%# Saved Chatbots %>
      <div class="relative h-full">
        <div class="overflow-y-auto h-full pb-12"> <%# Add pb-12 class to create space for the button %>
          <ul role="list">
            <% chatbots.first(10).each do |bot| %>
              <%= render 'chats/chatbot_select/option', chatbot: bot, selected: bot == selected_chatbot %>
            <% end %>
          </ul>
        </div>
        <%# All saves link %>
        <div class="px-4 py-2 bg-white/80 backdrop-blur-md backdrop-saturate-150 border-t border-tertiary-300 fixed inset-x-0 bottom-0 shrink-0">
          <%= link_to favorites_chatbots_path, class: 'btn w-full group' do %>
            All Saves

            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-0 h-0 ml-0 shrink-0 transition-all duration-200 ease-in-out group-hover:w-4 group-hover:h-4 group-hover:ml-2">
              <path fill-rule="evenodd" d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z" clip-rule="evenodd" />
            </svg>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>